{"version":3,"sources":["webpack:///./src/views/trading/manyView/manyView.vue?5dc6","webpack:///./src/views/trading/manyView/manyView.vue","webpack:///src/views/trading/manyView/manyView.vue","webpack:///./src/views/trading/manyView/manyView.vue?d048","webpack:///./src/views/trading/manyView/manyView.vue?2bf7"],"names":["render","_vm","this","_c","_self","staticStyle","_v","staticClass","attrs","on","change","model","value","cloumn","callback","$$v","expression","class","_l","num","v","o","key","staticRenderFns","name","props","components","data","JSON","parse","localStorage","getItem","list","page","loading","finish","mounted","type","$route","query","getList","methods","search","current","init","d","area","size","res","$api","trading_view_page","arr","forEach","item","push","time","$dayjs","Date","date","format","close","open","high","highest","low","lowest","volume","totalAmount","length","concat","initView","i","setItem","stringify","location","reload","val","chart","LightweightCharts","createChart","document","getElementById","layout","background","color","textColor","grid","vertLines","horzLines","priceScale","applyOptions","timeScale","candleStickData","lineData","map","datapoint","areaSeries","addAreaSeries","lastValueVisible","crosshairMarkerVisible","lineColor","topColor","bottomColor","setData","mainSeries","addCandlestickSeries","wickUpColor","upColor","wickDownColor","downColor","borderVisible","window","addEventListener","box","$","resize","width","height","component"],"mappings":"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","file":"static/js/chunk-51b0b33f.53a2835a.js","sourcesContent":["export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/_style-resources-loader@1.5.0@style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./manyView.vue?vue&type=style&index=0&id=3e0c3396&prod&scoped=true&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"margin\":\"20px 100px 20px 100px\"}},[_vm._v(\" 请选择列数： \"),_c('Select',{staticClass:\"w200\",attrs:{\"placeholder\":\"\"},on:{\"on-change\":_vm.change},model:{value:(_vm.cloumn),callback:function ($$v) {_vm.cloumn=$$v},expression:\"cloumn\"}},[_c('Option',{attrs:{\"value\":2}},[_vm._v(\"二列\")]),_c('Option',{attrs:{\"value\":3}},[_vm._v(\"三列\")])],1),_c('div',{staticClass:\"cloGrid mt20\",class:[`clo${_vm.cloumn}`]},_vm._l((_vm.num),function(v,o){return _c('div',{key:o,staticClass:\"relative\",staticStyle:{\"background-color\":\"rgb(30, 32, 38)\"}},[_c('div',{staticStyle:{\"width\":\"calc(100% - 20px)\",\"height\":\"calc(100% - 20px)\",\"position\":\"absolute\",\"left\":\"10px\",\"top\":\"10px\"},attrs:{\"id\":`manyView`+o}})])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"\" style=\"margin:20px 100px 20px 100px;\">\r\n    请选择列数：\r\n    <Select v-model=\"cloumn\" @on-change=\"change\" class=\"w200\" placeholder=\"\">\r\n        <Option :value=\"2\">二列</Option>\r\n        <Option :value=\"3\">三列</Option>\r\n    </Select>\r\n\t<div class=\"cloGrid mt20\" :class=\"[`clo${cloumn}`]\">\r\n        <div v-for=\"(v,o) in num\" :key=\"o\" class=\"relative \" style=\"background-color: rgb(30, 32, 38);\">\r\n            <div :id=\"`manyView`+o\" style=\"width:calc(100% - 20px);height:calc(100% - 20px);position: absolute;left:10px;top:10px;\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { createChart } from \"lightweight-charts\";\r\nimport { generateCandlestickData } from './data.js'\r\nexport default {\r\n\tname: \"\",\r\n\tprops: {},\r\n\tcomponents: {},\r\n\tdata() {\r\n\t\treturn {\r\n            cloumn:JSON.parse(localStorage.getItem('manyView_column')) || 3,//几列。两列和三列。\r\n            num:6,//图表数量\r\n\t\t\tlist:[],\r\n            page:{\r\n                \"current\": 1,\r\n                \"size\": 200,\r\n                loading:false,\r\n                finish:false,\r\n            },\r\n        };\r\n\t},\r\n\tmounted() {\r\n\t\t//图表教程\r\n\t\t//https://tradingview.github.io/lightweight-charts/tutorials/customization/chart-colors\r\n\t\tconst {type}= this.$route.query;\r\n\t\tif(type){\r\n\t\t\tthis.getList(type);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tsearch(){\r\n            this.page.current=1;\r\n            this.getList(()=>{\r\n\t\t\t\tthis.init();\r\n\t\t\t});\r\n        },\r\n\t\t//根据接口获取\r\n        async getList(type){\r\n            if(this.page.loading){\r\n                return;\r\n            }\r\n            let d={\r\n                // area: this.areaList[this.active].type,\r\n\t\t\t\tarea:type,\r\n                \"current\": this.page.current,\r\n                \"size\": this.page.size,\r\n            };\r\n            this.page.loading=true;\r\n            let res = await this.$api.trading_view_page(d);\r\n            let list = res.list || [];\r\n            let arr = [];\r\n            list.forEach(item => {\r\n                arr.push({\r\n                    time: this.$dayjs(new Date(item.date)).format('YYYY-MM-DD'),\r\n                    close: item.close,\r\n                    open: item.open,\r\n                    high: item.highest,\r\n                    low: item.lowest,\r\n                    volume: item.totalAmount,\r\n                })\r\n\t\t\t\t// time: \"2018-10-19\",\r\n\t\t\t\t// open: 180.34,\r\n\t\t\t\t// high: 180.99,\r\n\t\t\t\t// low: 178.57,\r\n\t\t\t\t// close: 179.85,\r\n            })\r\n            if (list.length >= d.size) {\r\n                this.page.finish = false;\r\n            } else {\r\n                this.page.finish = true;\r\n            }\r\n            if(d.current==1){\r\n                this.list=arr;\r\n            }else{\r\n                this.list=arr.concat(this.list);\r\n            }\r\n            this.page.loading=false;\r\n            console.log(this.list,'list')\r\n            this.initView(this.list);\r\n        },\r\n        initView(list){\r\n            for(let i=0;i<this.num;i++){\r\n                this.init(i,list);\r\n            }\r\n        },\r\n        change(){\r\n            localStorage.setItem('manyView_column',JSON.stringify(this.cloumn));\r\n            this.num=0;\r\n            location.reload();\r\n            // this.$nextTick(()=>{\r\n            //     this.num=9;\r\n            //     this.getList();\r\n            // });\r\n        },\r\n\t\t//js文件引入\r\n\t\t//val：dom标识，list：数据\r\n\t\tinit(val,list) {\r\n\t\t\tconst chart = LightweightCharts.createChart(\r\n\t\t\t\tdocument.getElementById(`manyView${val}`),\r\n\t\t\t\t{\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t// background: { color: \"rgb(30, 32, 38)\" },\r\n\t\t\t\t\t\tbackground: { color: \"#16161a\" },\r\n\t\t\t\t\t\ttextColor: \"#dddddd\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgrid: {\r\n\t\t\t\t\t\tvertLines: { color: \"#222531\" },\r\n\t\t\t\t\t\thorzLines: { color: \"#222531\" },\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t// Setting the border color for the vertical axis\r\n\t\t\tchart.priceScale().applyOptions({\r\n\t\t\t\t// borderColor: \"#71649C\",\r\n\t\t\t});\r\n\t\t\t// Setting the border color for the horizontal axis\r\n\t\t\tchart.timeScale().applyOptions({\r\n\t\t\t\t// borderColor: \"#71649C\",\r\n\t\t\t});\r\n\t\t\t// Generate sample data to use within a candlestick series\r\n\t\t\tconst candleStickData = list;\r\n\r\n\r\n            const lineData = candleStickData.map((datapoint) => ({\r\n\t\t\t\ttime: datapoint.time,\r\n\t\t\t\tvalue: (datapoint.close + datapoint.open) / 2,\r\n\t\t\t}));\r\n            const areaSeries = chart.addAreaSeries({\r\n\t\t\t\tlastValueVisible: false, // hide the last value marker for this series\r\n\t\t\t\tcrosshairMarkerVisible: false, // hide the crosshair marker for this series\r\n\t\t\t\tlineColor: \"transparent\", // hide the line\r\n\t\t\t\ttopColor: \"rgba(56, 33, 110,0.5)\",\r\n\t\t\t\tbottomColor: \"rgba(56, 33, 110, 0.05)\",\r\n\t\t\t});\r\n\t\t\tareaSeries.setData(lineData);\r\n\r\n\r\n\t\t\t// Create the Main Series (Candlesticks)\r\n\t\t\tconst mainSeries = chart.addCandlestickSeries();\r\n\t\t\tmainSeries.applyOptions({\r\n\t\t\t\twickUpColor: '#e53935',\r\n\t\t\t\tupColor: '#e53935',//买入颜色\r\n\t\t\t\twickDownColor: '#47a34b',\r\n\t\t\t\tdownColor: '#47a34b',//卖出颜色\r\n\t\t\t\tborderVisible: false,\r\n\t\t\t});\r\n\t\t\tmainSeries.setData(candleStickData);\r\n\t\t\twindow.addEventListener(\"resize\", () => {\r\n\t\t\t\t// chart.resize(window.innerWidth, window.innerHeight);\r\n\t\t\t\tlet box=$(`#manyView${val}`);\r\n\t\t\t\tchart.resize(box.width(), box.height());\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.cloGrid{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n}\r\n.clo2>div{\r\n    width: calc((100% - (10px * 1)) / 2);\r\n    margin:0 10px 10px 0;\r\n    height: 0;\r\n    padding-top: 40%;\r\n}\r\n.clo2>div:nth-child(2n){\r\n    margin:0 0 10px 0;\r\n}\r\n\r\n.clo3>div{\r\n    width: calc((100% - (10px * 2)) / 3);\r\n    margin:0 10px 10px 0;\r\n    height: 0;\r\n    padding-top: 25%;\r\n}\r\n.clo3>div:nth-child(3n){\r\n    margin:0 0 10px 0;\r\n}\r\n.relative{position: relative;}\r\n</style>","import mod from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.4.1@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./manyView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.4.1@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/index.js??vue-loader-options!./manyView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./manyView.vue?vue&type=template&id=3e0c3396&scoped=true\"\nimport script from \"./manyView.vue?vue&type=script&lang=js\"\nexport * from \"./manyView.vue?vue&type=script&lang=js\"\nimport style0 from \"./manyView.vue?vue&type=style&index=0&id=3e0c3396&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.11.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e0c3396\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}