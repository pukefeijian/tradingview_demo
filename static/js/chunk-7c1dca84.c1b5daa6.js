(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c1dca84"],{"069f":function(t,e,i){},"0845":function(t,e,i){"use strict";i("069f")},"119b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flexColumn",staticStyle:{flex:"1",overflow:"auto"}},[e("div",{staticClass:"selectMenus borderBottom borderLeft borderRight"},[e("div",{staticClass:"selectMenu",class:{active:t.isAuto},on:{click:function(e){return t.changeAuto(!0)}}},[t._v(t._s("自动回放"))])]),e("div",{staticClass:"flexBox",staticStyle:{flex:"1",overflow:"auto"}},[e("div",{staticStyle:{flex:"1",overflow:"auto"}},[e("timeView",{ref:"timeView",staticClass:"relative wh100",attrs:{list:t.list,isAuto:t.isAuto,area:t.area}})],1),e("handicap",{ref:"handicap",attrs:{area:t.area}})],1)])},a=[],r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"f-fill",staticStyle:{height:"100%",width:"100%",position:"absolute"},attrs:{id:"chart_container_timeView"}}),e("loading-layer",{attrs:{isShow:!t.isShow}})],1)},o=[];i("a199"),i("ca7c"),i("05a0"),i("de68"),i("5614");function n(){return{debug:!1,fullscreen:!1,symbol:null,interval:localStorage.getItem("tradingview_interval_timeView")||"1",autosize:!0,container:"chart_container_timeView",datafeed:null,library_path:"charting_library/",custom_css_url:"custom-styles.css",locale:""+_vm.$t("locale"),timezone:"Asia/Shanghai",disabled_features:["use_localstorage_for_settings","header_symbol_search","header_compare","symbol_search_hot_key","compare_symbol","symbol_info","go_to_date","timeframes_toolbar","left_toolbar","header_widget"],enabled_features:[],overrides:{"paneProperties.background":"#17171a","paneProperties.horzGridProperties.color":"#17171a","paneProperties.vertGridProperties.color":"#17171a","paneProperties.crossHairProperties.style":1,"paneProperties.legendProperties.showBarChange":!1,"paneProperties.topMargin":10,"paneProperties.bottomMargin":10,"mainSeriesProperties.style":3,"mainSeriesProperties.candleStyle.upColor":"#e53935","mainSeriesProperties.candleStyle.borderUpColor":"#b32b28","mainSeriesProperties.candleStyle.wickUpColor":"#e53935","mainSeriesProperties.candleStyle.downColor":"#4caf50","mainSeriesProperties.candleStyle.borderDownColor":"#47a34b","mainSeriesProperties.candleStyle.wickDownColor":"#4caf50","mainSeriesProperties.statusViewStyle.symbolTextSource":"ticker","scalesProperties.textColor":"#AAA","scalesProperties.backgroundColor":"#1c1c28","scalesProperties.lineColor":"#252537"},studies_overrides:{"volume.volume.color.0":"#4caf50","volume.volume.color.1":"#e53935","volume.volume ma.visible":!1,"relative strength index.plot.color":"#5973fe","relative strength index.plot.linewidth":1.5,"relative strength index.hlines background.color":"#134A9F"},loading_screen:{backgroundColor:"#1c1c28",foregroundColor:"#1c1c28"}}}i("4ff3"),i("d575"),i("f121"),i("c1fb");function l(t,e,i){for(var s=new Array,a=e-i,r=0;r<t;r++){var o=Math.random();s.push(i+Math.round(o*a))}return s}let c;var h={name:"",props:{area:{type:Object,default:()=>{}},list:{type:Array,default:()=>{}},isAuto:{isAuto:Boolean,default:!1}},components:{},data(){return{isShow:!0,tradingViewConfig:n(),currency1:"",currency2:"",saved_chart:null,chart:null,feed:null,last_price:1234.2365,bars:[],page:{area:"",current:1,size:500,loading:!1,finish:!1},isShowCharts:!1}},methods:{createFeed(){let t=this,e={DataPulseUpdater:function(t,e){this._datafeed=t,this._subscribers={},this._requestsPending=0;var i=this,s=function(){if(!(i._requestsPending>0))for(var t in i._subscribers){var e=i._subscribers[t],s=e.resolution,a=parseInt((new Date).valueOf()/1e3),r=a-i.periodLengthSeconds(s,10);i._requestsPending++,function(e){i._datafeed.getBars(e.symbolInfo,s,r,a,(function(s){if(i._requestsPending--,i._subscribers.hasOwnProperty(t)&&0!==s.length){var a=s[s.length-1];if(isNaN(e.lastBarTime)||!(a.time<e.lastBarTime)){var r=e.listeners,o=!isNaN(e.lastBarTime)&&a.time>e.lastBarTime;if(o){if(s.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");for(var n=s[s.length-2],l=0;l<r.length;++l)r[l](n)}e.lastBarTime=a.time;for(let t=0;t<r.length;++t)r[t](a)}}}),(function(){i._requestsPending--}))}(e)}};"undefined"!=typeof e&&e>0&&setInterval(s,e)}};return e.DataPulseUpdater.prototype.periodLengthSeconds=function(t,e){var i=0;return i="D"===t?e:"M"===t?31*e:"W"===t?7*e:e*t/1440,24*i*60*60},e.DataPulseUpdater.prototype.subscribeDataListener=function(t,e,i,s){this._datafeed._logMessage("Subscribing "+s),this._subscribers.hasOwnProperty(s)||(this._subscribers[s]={symbolInfo:t,resolution:e,lastBarTime:NaN,listeners:[]}),this._subscribers[s].listeners.push(i)},e.DataPulseUpdater.prototype.unsubscribeDataListener=function(t){this._datafeed._logMessage("Unsubscribing "+t),delete this._subscribers[t]},e.Container=function(t){this._configuration={supports_search:!1,supports_group_request:!1,supported_resolutions:["1"],supports_marks:!0,supports_timescale_marks:!0,exchanges:["smartbit"]},this._barsPulseUpdater=new e.DataPulseUpdater(this,t||1e4),this._enableLogging=!0,this._callbacks={},this._initializationFinished=!0,this._fireEvent("initialized"),this._fireEvent("configuration_ready")},e.Container.prototype._fireEvent=function(t,e){if(this._callbacks.hasOwnProperty(t)){for(var i=this._callbacks[t],s=0;s<i.length;++s)i[s](e);this._callbacks[t]=[]}},e.Container.prototype._logMessage=function(t){if(this._enableLogging)new Date},e.Container.prototype.on=function(t,e){return this._callbacks.hasOwnProperty(t)||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},e.Container.prototype.onReady=function(t){let e=this;this._configuration?setTimeout((function(){t(e._configuration)}),0):this.on("configuration_ready",(function(){t(e._configuration)}))},e.Container.prototype.resolveSymbol=function(e,i,s){this._logMessage("GOWNO :: resolve symbol "+e),Promise.resolve().then(()=>{function e(){return t.last_price>1e3?100:1e8}this._logMessage("GOWNO :: onResultReady inject AAPL"),i({name:t.area.text,timezone:"Asia/Shanghai",pricescale:e(),minmov:1,minmov2:0,ticker:t.area.text,description:"",session:"24x7",type:"bitcoin",has_intraday:!0,intraday_multipliers:["1"],has_weekly_and_monthly:!1,has_no_volume:!1,regular_session:"24x7"})})},e.Container.prototype.getBars=function(t,e,i,s,a,r){s([],{noData:!0})},e.Container.prototype.getMarks=function(e,i,s,a,r){var o=t.getMarks();setTimeout(()=>{a(o)},0)},e.Container.prototype.subscribeBars=function(e,i,s,a,r){t.bars.forEach((function(t){s(t)})),this.on("pair_change",(function(){r()}))},e.Container.prototype.unsubscribeBars=function(t){this._barsPulseUpdater.unsubscribeDataListener(t)},new e.Container},getMarks(){var t={background:"#4caf50"},e={background:"#e53935"},i=[];let s=[{id:232323,time:"2023-02-10 17:00:00",type:"buy",text:"港股节期停市！",label:"注"},{id:23233,time:"2023-02-05 17:00:00",type:"sell",text:"三只松鼠股东减持2%！",label:"事"}];return s=[],s.map((s,a)=>{var r={};r.id=s.id,r.time=new Date(s.time).getTime()/1e3,r.color="buy"==s.type?t:e,r.text=s.text,r.label=s.label,r.labelFontColor="#fff",r.minSize=20,i.push(r)}),i},async init(){this.feed=this.createFeed(),this.tradingViewConfig.symbol=this.currency1+":"+this.currency2,this.tradingViewConfig.datafeed=this.feed,this.chart=window.tvWidget=new TradingView.widget(this.tradingViewConfig),this.chart.onChartReady(()=>{this.updateKLine(),this.isShow=!0,this.chart.subscribe("reset_scales",()=>{this.updateKLine()});this.chart.activeChart().crossHairMoved().subscribe(null,({time:t,price:e})=>{}),this.chart.subscribe("mouse_up",()=>{this.$emit("up_line",{})}),this.chart.activeChart().onVisibleRangeChanged().subscribe(null,({from:t,to:e})=>{})})},createData(){setInterval(()=>{let t=this.bars,e=t[t.length-1].low,i=.1*e;t.push({time:(new Date).getTime(),close:l(1,e+i,e-i)[0],open:l(1,e+i/2,e-i/2)[0],high:l(1,e+i,e-i)[0],low:l(1,e+i,e-i)[0],volume:1e5*Math.random()}),this.bars=t,this.changePair()},5e3)},async getList_time(t){let e=[];this.list.forEach(t=>{e.push({time:t.time,close:t.close,open:t.open,high:t.height,low:t.low,volume:t.totalVol})}),e=e.reverse();let i=e.length,s=0;c=setInterval(()=>{this.bars.push(e[s]),this.changePair(),s++,s>=i&&clearInterval(c)},1e3),t&&t()},async getList(t){if(this.page.loading)return;this.area.type,this.page.current,this.page.size;this.page.loading=!0;let e=this.list,i=[];e.forEach(t=>{i.push({time:t.time,close:t.close,open:t.open,high:t.height,low:t.low,volume:t.totalVol})}),i=i.reverse(),this.bars=i,this.isShowCharts=!1,setTimeout(()=>{this.isShowCharts=!0},500),t&&t()},initSocket(){this.chart?this.changePair():this.init(),this.bars=[],this.isAuto?this.getList_time(()=>{this.changePair()}):this.getList(()=>{this.changePair()})},changePair(){this.chart&&this.feed&&(this.feed._fireEvent("pair_change"),this.chart.activeChart().zoomOut(),this.chart.activeChart().setSymbol(this.area.text,()=>{}),this.chart.activeChart().resetData())},updateKLine(){},getData(){this.page.current=1,this.page.finish=!1,setTimeout(()=>{this.initSocket()},0)}},mounted(){},computed:{lang(){return this.$i18n.locale}},watch:{lang(){this.tradingViewConfig.locale=""+this.$t("locale"),this.tradingViewConfig.datafeed=this.feed,this.chart=window.tvWidget=new TradingView.widget(this.tradingViewConfig)},pair(t,e){this.currency1=t[0],this.currency2=t[1],this.changePair()},isAuto:{handler:function(t,e){clearInterval(c),this.getData()},deep:!1,immediate:!1}},beforeDestroy(){this.$eventBus.$off("tradingview_msg"),this.chart=null,clearInterval(c)}},u=h,d=(i("768f"),i("829d")),p=Object(d["a"])(u,r,o,!1,null,null,null),f=p.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h100p flexColumn",staticStyle:{"border-left":"1px solid #434651","min-width":"300px",overflow:"auto"}},[e("div",{staticClass:"borderBottom p10 flexBetween"},[e("div",{staticClass:"alignCenter"},[e("div",{staticClass:"f18 fb"},[e("span",{class:[t.$base.getColor(t.info.close,t.info.open)]},[t._v(t._s(t._f("format")(t.info.close,2)))]),e("span",{staticClass:"ml10 circleBox"},[t._v(t._s(t.area.text))])]),e("div",{staticClass:"ml10",class:[t.$base.getColor(t.info.close,t.info.open)]},[e("div",{staticClass:"f14 fb"},[t._v(t._s(t._f("format")(t.info.close-t.info.open,2,"",1)))]),e("div",{staticClass:"f12"},[t.info.close-t.info.open>0?e("Icon",{attrs:{type:"md-arrow-dropup"}}):t.info.close-t.info.open<0?e("Icon",{attrs:{type:"md-arrow-dropdown"}}):t._e(),t._v(" "+t._s(t._f("toPercent")((t.info.close-t.info.open)/t.info.open*100,2))+" ")],1)])]),e("div",[e("img",{staticClass:"pointer",staticStyle:{width:"20px",height:"20px"},attrs:{src:i("e050"),title:"收藏"},on:{click:function(e){return t.addFollow()}}}),e("img",{staticClass:"active_t ml5",staticStyle:{width:"20px",height:"20px"},attrs:{src:i("9c33"),title:"预警"},on:{click:function(e){return e.stopPropagation(),t.addWarn()}}})])]),e("div",{staticClass:"handicapTitle"},[t._v("买卖五档")]),e("div",{staticClass:"borderBottom"},[e("div",{staticClass:"flexBox"},[e("div",{staticClass:"borderRight alignCenter p5 op7",staticStyle:{width:"2em"}},[t._v("卖盘")]),e("div",{staticClass:"center",staticStyle:{flex:"1"}},t._l(5,(function(i,s){return e("div",{key:s,staticClass:"gradeList"},[e("div",{staticClass:"op7"},[t._v(t._s(6-(s+1)))]),e("div",{class:[t.color]},[t._v(t._s(t._f("format")(t.sellPrices[s],2)))]),e("div",[t._v(t._s(t._f("format")(t.sellAmounts[s],2)))])])})),0)]),0==t.sellAmountsSum&&0==t.buyAmountsSum?e("div",{staticClass:"buySellRatio"},[e("div",{staticClass:"buyRatio",style:{width:"50%"}}),e("div",{staticClass:"sellRatio",style:{width:"50%"}})]):e("div",{staticClass:"buySellRatio"},[e("div",{staticClass:"buyRatio",style:{width:t.sellAmountsSum/(t.sellAmountsSum+t.buyAmountsSum)*100+"%"}}),e("div",{staticClass:"sellRatio",style:{width:t.buyAmountsSum/(t.sellAmountsSum+t.buyAmountsSum)*100+"%"}})]),e("div",{staticClass:"flexBox"},[e("div",{staticClass:"borderRight alignCenter p5 op7",staticStyle:{width:"2em"}},[t._v("买盘")]),e("div",{staticClass:"center",staticStyle:{flex:"1"}},t._l(5,(function(i,s){return e("div",{key:s,staticClass:"gradeList"},[e("div",{staticClass:"op7"},[t._v(t._s(s+1))]),e("div",{class:[t.color]},[t._v(t._s(t._f("format")(t.buyPrices[s],2)))]),e("div",[t._v(t._s(t._f("format")(t.buyAmounts[s],2)))])])})),0)])]),e("div",{staticClass:"handicapTitle"},[t._v("盘口")]),e("div",[e("div",{staticClass:"grid_2"},[e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("最高")]),e("div",{class:[t.color]},[t._v(t._s(t._f("format")(t.info.highest,2)))])]),e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("开盘")]),e("div",{class:[t.color]},[t._v(t._s(t._f("format")(t.info.lowest,2)))])])]),e("div",{staticClass:"grid_2"},[e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("最低")]),e("div",{class:[t.color]},[t._v(t._s(t._f("format")(t.info.open,2)))])]),e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("昨收")]),e("div",{class:[t.color]},[t._v(t._s(t._f("format")(t.info.close,2)))])])]),e("div",{staticClass:"grid_2"},[e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("成交量")]),e("div",{},[t._v(t._s(t._f("format")(t.info.currentAmount,2)))])]),e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("成交额")]),e("div",{},[t._v(t._s(t._f("format")("",2)))])])]),e("div",{staticClass:"grid_2"},[e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("量比")]),e("div",{},[t._v(t._s(t._f("format")(t.info.quantityrelative,2)))])]),e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("委比")]),e("div",{},[t._v(t._s(t._f("format")(t.info.committeeThan,2)))])])]),e("div",{staticClass:"grid_2"},[e("div",{staticClass:"flexBetween"},[e("div",{staticClass:"op7"},[t._v("委差")]),e("div",{},[t._v(t._s(t._f("format")(t.info.committeeSent,2)))])]),e("div")])]),e("div",{staticClass:"handicapTitle"},[t._v("分时成交")]),e("div",{staticStyle:{flex:"1",overflow:"auto"},on:{scroll:t.scrollEvent}},[t._l(t.list,(function(i,s){return e("div",{key:s,staticClass:"grid_4"},[e("div",{staticClass:"cloc"},[t._v(t._s(i.time?t.$dayjs(i.time).format("HH:mm"):"00:00"))]),e("div",{staticClass:"center",class:"B"==i.direction?"red":"green"},[t._v(t._s(i.price))]),e("div",{staticClass:"center",class:"B"==i.direction?"red":"green"},[t._v(t._s(i.residueAmount))]),e("div",{staticClass:"tright"},[t._v(t._s(i.amount))])])})),0==t.list.length?e("div",{staticClass:"center cloc f12 mt10"},[t._v("暂无数据")]):t._e()],2),e("warnPop",{attrs:{area:t.area},model:{value:t.isWarnPop,callback:function(e){t.isWarnPop=e},expression:"isWarnPop"}})],1)},_=[],v=i("3682"),m={name:"",props:{area:{type:Object,default:()=>{}}},components:{warnPop:v["a"]},data(){return{info:{},isWarnPop:!1,list:[],page:{current:1,size:20,loading:!1,finish:!1}}},mounted(){},methods:{async cancelFollow(){let t={area:this.area.type};this.$api.price_alert_cancel(t).then(t=>{this.$Message.success("关注成功!")})},async addFollow(){let t={area:this.area.type};this.$api.price_alert_add(t).then(t=>{this.$Message.success("关注成功!")})},init(){this.page={current:1,size:20,loading:!1,finish:!1},this.list=[],this.getList()},search(){this.page.current=1,this.getList()},scrollEvent(t){let e=this;Math.ceil(t.currentTarget.scrollTop+t.currentTarget.clientHeight)>=t.currentTarget.scrollHeight-20&&(e.page.finish||e.page.loading||(e.page.current+=1,e.getList()))},async getList(){if(this.page.loading)return;let t={area:this.area.type,current:this.page.current,size:this.page.size};this.page.loading=!0;let e=await this.$api.trading_minute_page(t),i=e.list||[];i.length>=t.size?this.page.finish=!1:this.page.finish=!0,1==t.current?this.list=i:this.list=this.list.concat(i),this.page.loading=!1},addWarn(){this.isWarnPop=!0},async getInfo(){let t={area:this.area.type};this.info={};let e=await this.$api.snapshot_last(t);this.info=e||{}}},computed:{buyPrices(){return this.info.buyPrices?JSON.parse(this.info.buyPrices):["","","","",""]},buyAmounts(){return this.info.buyAmounts?JSON.parse(this.info.buyAmounts):["","","","",""]},buyAmountsSum(){let t=0;return this.info.buyAmounts&&JSON.parse(this.info.buyAmounts).map(e=>{t+=e}),t},sellAmountsSum(){let t=0;return this.info.sellAmounts&&JSON.parse(this.info.sellAmounts).map(e=>{t+=e}),t},sellPrices(){return this.info.sellPrices?JSON.parse(this.info.sellPrices).reverse():["","","","",""]},sellAmounts(){return this.info.sellAmounts?JSON.parse(this.info.sellAmounts).reverse():["","","","",""]},color(){return this.info.open&&this.info.close?this.info.close-this.info.open>0?"red":this.info.close-this.info.open<0?"green":"":""}},watch:{area:{handler:function(t,e){this.getInfo(),this.init()},deep:!0,immediate:!1}}},b=m,y=(i("0845"),Object(d["a"])(b,g,_,!1,null,"7ca4c36e",null)),C=y.exports,w={name:"WebSuperReplay",components:{timeView:f,handicap:C},data(){return{isAuto:!0,list:[],page:{current:1,size:200,loading:!1,finish:!1},area:{type:"",text:""}}},mounted(){const{type:t,text:e}=this.$route.query;t&&(this.area.type=t,this.area.text=e,this.getList())},methods:{showDom(){this.$nextTick(()=>{this.$refs["timeView"].getData()})},scrollEvent(t){let e=this;Math.ceil(t.currentTarget.scrollTop+t.currentTarget.clientHeight)>=t.currentTarget.scrollHeight-20&&(e.page.finish||e.page.loading||(e.page.current+=1,e.getList()))},async getList(){if(this.page.loading)return;let t={area:this.area.type,current:this.page.current,size:this.page.size};this.page.loading=!0;let e=await this.$api.trading_page(t),i=e.list||[];i.length>=t.size?this.page.finish=!1:this.page.finish=!0,1==t.current?this.list=i:this.list=this.list.concat(i),this.page.loading=!1,this.showDom()},changeAuto(t){this.isAuto==t?this.isAuto=!1:this.isAuto=t}}},S=w,P=(i("701a"),Object(d["a"])(S,s,a,!1,null,"16c4a626",null));e["default"]=P.exports},"579b":function(t,e,i){},"701a":function(t,e,i){"use strict";i("e04c")},"768f":function(t,e,i){"use strict";i("579b")},e04c:function(t,e,i){},e050:function(t,e,i){t.exports=i.p+"static/img/collect.c1db1037.svg"}}]);
//# sourceMappingURL=chunk-7c1dca84.c1b5daa6.js.map